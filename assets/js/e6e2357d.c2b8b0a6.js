"use strict";(globalThis.webpackChunkbook_ui=globalThis.webpackChunkbook_ui||[]).push([[506],{7897:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var i=t(6540),a=t(9211),n=t(8774),r=t(9345),o=t(6347),l=t(6025),d=t(4848);const c=()=>{const{user:e,isAuthenticated:s,logout:t,token:c,isInitialized:m,updateUserProfile:h}=(0,r.A)(),x=(0,o.W6)(),{withBaseUrl:p}=(0,l.hH)(),[g,u]=(0,i.useState)({}),[b,j]=(0,i.useState)(!0),[f,y]=(0,i.useState)(!1),[v,N]=(0,i.useState)(!1),[_,w]=(0,i.useState)(null),[k,S]=(0,i.useState)(!1),[C,A]=(0,i.useState)({first_name:"",last_name:""});(0,i.useEffect)(()=>{e&&A({first_name:e.first_name||"",last_name:e.last_name||""})},[e]);const P="undefined"!=typeof window?localStorage.getItem("token")||localStorage.getItem("access_token"):null;(0,i.useEffect)(()=>{m&&s&&e?R():!m||s||P||j(!1)},[m,s,e,c]);const R=async()=>{try{const e=c||P;if(!e)return;const s="https://rabiasohail098-robotics-backend.hf.space",t="undefined"!=typeof window?window.env?.REACT_APP_API_URL||("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:8002/api/v1":`${s}/api/v1`):"http://localhost:8002/api/v1",i=await fetch(`${t}/auth/reading-progress`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(i.ok){const e=await i.json();u(e.reading_progress||{})}}catch(e){console.error("Failed to fetch reading progress:",e)}finally{j(!1)}},T=e=>{const{name:s,value:t}=e.target;A(e=>({...e,[s]:t})),w(null)};if(!m||P&&!e)return(0,d.jsx)(a.A,{title:"Profile",description:"User profile page",children:(0,d.jsx)("div",{className:"container margin-vert--lg",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col col--6 col--offset-3",children:(0,d.jsxs)("div",{className:"card",style:{textAlign:"center",padding:"50px"},children:[(0,d.jsxs)("div",{className:"card__body",children:[(0,d.jsx)("div",{className:"spinner",style:{border:"4px solid #f3f3f3",borderTop:"4px solid #7e22ce",borderRadius:"50%",width:"40px",height:"40px",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),(0,d.jsx)("h3",{children:"Loading Profile..."}),(0,d.jsx)("p",{children:"Please wait while we retrieve your account details."})]}),(0,d.jsx)("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]})})})})});if(!s&&!e&&!P)return(0,d.jsx)(a.A,{title:"Profile",description:"User profile page",children:(0,d.jsx)("div",{className:"container margin-vert--lg",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col col--6 col--offset-3",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("div",{className:"card__header",children:(0,d.jsx)("h2",{style:{color:"#dc2626"},children:"Access Denied"})}),(0,d.jsxs)("div",{className:"card__body",children:[(0,d.jsx)("p",{children:"You must be logged in to view this page."}),(0,d.jsxs)("div",{style:{marginTop:"20px"},children:[(0,d.jsx)(n.A,{to:"/signin",className:"button button--primary button--block",children:"Sign In"}),(0,d.jsxs)("div",{style:{textAlign:"center",marginTop:"10px"},children:["or ",(0,d.jsx)(n.A,{to:"/signup",children:"Create an Account"})]})]})]})]})})})})});const z=g?Object.keys(g).filter(e=>g[e]?.completed).length:0,B=g?Object.keys(g).length:0;return(0,d.jsx)(a.A,{title:"Profile",description:"Your Physical AI & Humanoid Robotics profile",children:(0,d.jsx)("div",{className:"container margin-vert--lg",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col col--8 col--offset-2",children:[(0,d.jsxs)("div",{className:"card margin-bottom--lg shadow--md",children:[(0,d.jsx)("div",{className:"card__header",style:{background:"linear-gradient(135deg, #7e22ce 0%, #c026d5 100%)",color:"white"},children:(0,d.jsx)("h2",{style:{margin:0},children:"\ud83d\udc64 Your Profile"})}),(0,d.jsx)("div",{className:"card__body",children:f?(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),N(!0),w(null),S(!1);try{await h(C.first_name,C.last_name)?(y(!1),S(!0),setTimeout(()=>S(!1),3e3)):w("Failed to update profile. Please try again.")}catch(s){console.error("Profile update error:",s),w(s instanceof Error?s.message:"An error occurred while updating your profile")}finally{N(!1)}},children:[_&&(0,d.jsx)("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#fee2e2",color:"#991b1b",borderRadius:"6px",border:"1px solid #fecaca"},children:_}),k&&(0,d.jsx)("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"6px",border:"1px solid #bbf7d0"},children:"\u2705 Profile updated successfully!"}),(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("label",{htmlFor:"first_name",style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"First Name:"}),(0,d.jsx)("input",{type:"text",id:"first_name",name:"first_name",value:C.first_name,onChange:T,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1em"}})]}),(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("label",{htmlFor:"last_name",style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Last Name:"}),(0,d.jsx)("input",{type:"text",id:"last_name",name:"last_name",value:C.last_name,onChange:T,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"1em"}})]}),(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("strong",{style:{color:"#7e22ce"},children:"Email:"}),(0,d.jsxs)("div",{style:{fontSize:"1em",padding:"8px",backgroundColor:"#f5f5f5",borderRadius:"6px",marginTop:"5px"},children:[e?.email," (cannot be changed)"]})]}),(0,d.jsxs)("div",{className:"button-group button-group--block",children:[(0,d.jsx)("button",{type:"submit",className:"button button--primary",disabled:v,children:v?"Saving...":"Save Changes"}),(0,d.jsx)("button",{type:"button",className:"button button--secondary margin-left--sm",onClick:()=>{y(!1),w(null),e&&A({first_name:e.first_name||"",last_name:e.last_name||""})},disabled:v,children:"Cancel"})]})]}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsxs)("div",{className:"col col--6",children:[(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("strong",{style:{color:"#7e22ce"},children:"First Name:"}),(0,d.jsx)("div",{style:{fontSize:"1.2em"},children:e?.first_name||"Not provided"})]}),(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("strong",{style:{color:"#7e22ce"},children:"Last Name:"}),(0,d.jsx)("div",{style:{fontSize:"1.2em"},children:e?.last_name||"Not provided"})]})]}),(0,d.jsxs)("div",{className:"col col--6",children:[(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("strong",{style:{color:"#7e22ce"},children:"Email:"}),(0,d.jsx)("div",{style:{fontSize:"1.2em"},children:e?.email})]}),(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("strong",{style:{color:"#7e22ce"},children:"Member since:"}),(0,d.jsx)("div",{children:e?.created_at?new Date(e.created_at).toLocaleDateString():"Recent"})]})]})]})})}),(0,d.jsx)("div",{className:"card__footer",children:(0,d.jsxs)("div",{className:"button-group button-group--block",children:[!f&&(0,d.jsx)("button",{className:"button button--primary",onClick:()=>y(!0),children:"\u270f\ufe0f Edit Profile"}),(0,d.jsx)("button",{className:"button button--secondary",onClick:()=>x.push("/"),children:"Go Home"}),(0,d.jsx)("button",{className:"button button--danger margin-left--sm",onClick:()=>{t(),x.push(p("/"))},children:"Sign Out"})]})})]}),(0,d.jsxs)("div",{className:"card margin-bottom--lg shadow--md",children:[(0,d.jsx)("div",{className:"card__header",children:(0,d.jsx)("h3",{children:"\ud83d\udcda Reading Progress"})}),(0,d.jsx)("div",{className:"card__body",children:b?(0,d.jsx)("p",{children:"Syncing progress..."}):B>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[(0,d.jsx)("strong",{children:"Completion Status"}),(0,d.jsxs)("span",{children:[z," / ",B," Chapters"]})]}),(0,d.jsx)("div",{style:{width:"100%",height:"10px",background:"#e5e7eb",borderRadius:"5px",overflow:"hidden"},children:(0,d.jsx)("div",{style:{width:z/B*100+"%",height:"100%",background:"#10b981",transition:"width 0.5s ease"}})})]}),(0,d.jsxs)("div",{className:"margin-bottom--md",children:[(0,d.jsx)("strong",{children:"Details:"}),(0,d.jsx)("ul",{style:{marginTop:"10px",listStyle:"none",padding:0},children:Object.entries(g).map(([e,s])=>(0,d.jsxs)("li",{style:{padding:"10px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,d.jsxs)("span",{children:["\ud83d\udcc4 ",(0,d.jsx)("strong",{children:e})]}),(0,d.jsxs)("span",{children:[s.completed?(0,d.jsx)("span",{className:"badge badge--success",children:"\u2705 Completed"}):(0,d.jsx)("span",{className:"badge badge--secondary",children:"\ud83d\udcd6 In Progress"}),(0,d.jsxs)("span",{style:{marginLeft:"10px",fontSize:"0.85em",color:"#666"},children:["(",Math.floor((s.time_spent||0)/60)," ","min read)"]})]})]},e))})]})]}):(0,d.jsxs)("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[(0,d.jsx)("p",{children:"No reading progress recorded yet."}),(0,d.jsx)(n.A,{to:"/docs/chapter-1/introduction-to-physical-ai",className:"button button--primary button--sm",style:{marginRight:"10px"},children:"Start Reading"}),(0,d.jsx)(n.A,{to:"/",className:"button button--secondary button--sm",children:"Go to Home"})]})})]})]})})})})}}}]);